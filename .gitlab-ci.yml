stages:
  - build
  - tests
  - deploy
build:
  stage: build
  script:
    - echo "test"
tests:
  stage: tests
  script:
    - apt-get install -y sudo
    - curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -
    - apt-get update
    - apt-get install -y -qq nodejs npm build-essential
    - ln -s /usr/bin/nodejs /usr/bin/node
    - cd Backend/
    - npm install
    - npm run test
deploy:
  stage: deploy
  script:
    - cd Backend/
    - npm start
  environment:
    name: production
    url: https://51.254.103.142
  only:
  - master